# load balancer

## Load balancer \(AWS ELB\)

> 서버 이중\(다중\)화로 서버 트래픽 분산. 동시 접속 최대 사용자 수가 가늠이 안될 때

ELB : Elastic Load balancer

* AWS에서 제공하는 L4 스위치 기능을 제공하는 로드 밸런싱 서비스
* ELB가 받은 요청을 해당하는 EC2 인스턴스, 서비스 그룹 등 다양하게 전달 할 수 있다.
* 너무 많은 요청을 처리하고 있거나, 정상적으로 작동하지 않는\(health-check\)서버에는 요청을 보내지 않는다.\(고가용성 보장\)
* 미니멀 한 기능을 제공하는 _Class LB_, 좀 더 안정적으로 발전한 _Network LB_, URL/domain/service\(Layer 7\)단위로 분산 할 수 있는 _Application LB_가 있음

### Auto scaling group

특정 조건\(cpu 사용량, 시간\)에 해당되면 자동으로 EC2 생성, 운영

> **참고 Scale Out vs Scale Up** Scale Out : 수적으로의 증가 \(서버 추가\)
>
> * 데이터 처리가 많은 환경에서 하나의 서버가 처리하는 일을 서버가 나누어서 \(분산\) 처리
> * 일반적인 웹 서비스에 적합
>
>   Scale Up : 크기의 증가 \(사양 추가\)
>
> * 물리머신\(베어 메탈\), VM, Container 등 OS가 작동하는 물리적/논리적 머신의 CPI, RAM, Disk 등 서버의 자원을 올린다.

* CPU, 메모리, 네트워크 응답 속도 등의 지표를 통하여 갑작스럽게 몰려오는 요청이나, 특정 인스턴스에 장애가 나더라도 사람이 직접 나서기 전에 시스템이 자동으로 대처하게 할 수 있다.
* Auto Scaling Group에서 어떤 경위로 인스턴스 수가 자동으로 변경됐는지 이메일로 알림을 받아 서비스가 이상이 생겼는지 파악할 수도 있다.
* 서비스 특성 상 사용자가 몰리는 시간, 몰리지 않는 시간에 최소/최대 값을 지정하여 서버 비용을 효율적으로 관리할 수 있다.

